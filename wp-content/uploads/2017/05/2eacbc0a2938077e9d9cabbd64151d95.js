/**handles:mustache,wpcom-notes-common,wpcom-notes-admin-bar,mailchimp-form-js**/
var Mustache="undefined"!=typeof module&&module.exports||{};!function(e){function n(e){return d.test(e)}function r(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return w[e]||e})}function t(e,n,r,t){t=t||"<template>";for(var a=n.split("\n"),o=Math.max(r-3,0),u=Math.min(a.length,r+3),l=a.slice(o,u),f,c=0,i=l.length;c<i;++c)f=c+o+1,l[c]=(f===r?" >> ":"    ")+l[c];return e.template=n,e.line=r,e.file=t,e.message=[t+":"+r,l.join("\n"),"",e.message].join("\n"),e}function a(e,n,r){if("."===e)return n[n.length-1];for(var t=e.split("."),a=t.length-1,o=t[a],u,l,f=n.length,c,i;f;){for(i=n.slice(0),l=n[--f],c=0;c<a&&(l=l[t[c++]],null!=l);)i.push(l);if(l&&"object"==typeof l&&o in l){u=l[o];break}}return"function"==typeof u&&(u=u.call(i[i.length-1])),null==u?r:u}function o(e,n,r,t){var o="",u=a(e,n);if(t)(null==u||u===!1||b(u)&&0===u.length)&&(o+=r());else if(b(u))v(u,function(e){n.push(e),o+=r(),n.pop()});else if("object"==typeof u)n.push(u),o+=r(),n.pop();else if("function"==typeof u){var l=n[n.length-1],f=function(e){return i(e,l)};o+=u.call(l,r(),f)||""}else u&&(o+=r());return o}function u(r,a){a=a||{};for(var o=a.tags||e.tags,u=o[0],l=o[o.length-1],f=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],c=[],i=!1,s=!1,p=function(){if(!i||s||a.space)c=[];else for(;c.length;)f.splice(c.pop(),1);i=!1,s=!1},h=[],g,b,v,d=function(e){o=k(e).split(/\s+/),b=o[0],v=o[o.length-1]},m=function(e){f.push('";',g,'\nvar partial = partials["'+k(e)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},y=function(e,n){var o=k(e);if(""===o)throw t(new Error("Section name may not be empty"),r,A,a.file);h.push({name:o,inverted:n}),f.push('";',g,'\nvar name = "'+o+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},w=function(e){y(e,!0)},S=function(e){var n=k(e),o=0!=h.length&&h[h.length-1].name;if(!o||n!=o)throw t(new Error('Section named "'+n+'" was never opened'),r,A,a.file);var u=h.pop();f.push('";',"\n    return buffer;","\n  };","\n})();"),u.inverted?f.push("\nbuffer += renderSection(name,stack,callback,true);"):f.push("\nbuffer += renderSection(name,stack,callback);"),f.push('\nbuffer += "')},j=function(e){f.push('";',g,'\nbuffer += lookup("'+k(e)+'",stack,"");','\nbuffer += "')},x=function(e){f.push('";',g,'\nbuffer += escapeHTML(lookup("'+k(e)+'",stack,""));','\nbuffer += "')},A=1,M,E,O=0,T=r.length;O<T;++O)if(r.slice(O,O+u.length)===u){switch(O+=u.length,M=r.substr(O,1),g="\nline = "+A+";",b=u,v=l,i=!0,M){case"!":O++,E=null;break;case"=":O++,l="="+l,E=d;break;case">":O++,E=m;break;case"#":O++,E=y;break;case"^":O++,E=w;break;case"/":O++,E=S;break;case"{":l="}"+l;case"&":O++,s=!0,E=j;break;default:s=!0,E=x}var $=r.indexOf(l,O);if($===-1)throw t(new Error('Tag "'+u+'" was not closed properly'),r,A,a.file);var H=r.substring(O,$);E&&E(H);for(var L=0;~(L=H.indexOf("\n",L));)A++,L++;O=$+l.length-1,u=b,l=v}else switch(M=r.substr(O,1)){case'"':case"\\":s=!0,f.push("\\"+M);break;case"\r":break;case"\n":c.push(f.length),f.push("\\n"),p(),A++;break;default:n(M)?c.push(f.length):s=!0,f.push(M)}if(0!=h.length)throw t(new Error('Section "'+h[h.length-1].name+'" was not closed properly'),r,A,a.file);p(),f.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var q=f.join("").replace(/buffer \+= "";\n/g,"");return a.debug&&("undefined"!=typeof console&&console.log?console.log(q):"function"==typeof print&&print(q)),q}function l(e,n){var l="view,partials,stack,lookup,escapeHTML,renderSection,render",f=u(e,n),c=new Function(l,f);return function(u,l){l=l||{};var f=[u];try{return c(u,l,f,a,r,o,i)}catch(r){throw t(r.error,e,r.line,n.file)}}}function f(){S={}}function c(e,n){return n=n||{},n.cache!==!1?(S[e]||(S[e]=l(e,n)),S[e]):l(e,n)}function i(e,n,r){return c(e)(n,r)}e.name="mustache.js",e.version="0.5.0-dev",e.tags=["{{","}}"],e.parse=u,e.compile=c,e.render=i,e.clearCache=f,e.to_html=function(e,n,r,t){var a=i(e,n,r);return"function"!=typeof t?a:void t(a)};var s=Object.prototype.toString,p=Array.isArray,h=Array.prototype.forEach,g=String.prototype.trim,b;b=p?p:function(e){return"[object Array]"===s.call(e)};var v;v=h?function(e,n,r){return h.call(e,n,r)}:function(e,n,r){for(var t=0,a=e.length;t<a;++t)n.call(r,e[t],t,e)};var d=/^\s*$/,k;if(g)k=function(e){return null==e?"":g.call(e)};else{var m,y;n("Â ")?(m=/^\s+/,y=/\s+$/):(m=/^[\s\xA0]+/,y=/[\s\xA0]+$/),k=function(e){return null==e?"":String(e).replace(m,"").replace(y,"")}}var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},S={}}(Mustache);
var wpNotesCommon,wpNotesCommentModView,wpNoteList,wpNoteModel;!function(t){var e=document.cookie.split(/;\s*/),n=!1;for(i=0;i<e.length;i++)if(e[i].match(/^wp_api=/)){e=e[i].split("="),n=e[1];break}wpNotesCommon={jsonAPIbase:"https://public-api.wordpress.com/rest/v1",hasUpgradedProxy:!1,noteTypes:{comment:"comment",follow:"follow",like:["like","like_trap"],reblog:"reblog",trophy:["best_liked_day_feat","like_milestone_achievement","achieve_automattician_note","achieve_user_anniversary","best_followed_day_feat","followed_milestone_achievement"],alert:["expired_domain_alert"]},noteType2Noticon:{like:"like",follow:"follow",comment_like:"like",comment:"comment",comment_pingback:"external",reblog:"reblog",like_milestone_achievement:"trophy",achieve_followed_milestone_note:"trophy",achieve_user_anniversary:"trophy",best_liked_day_feat:"milestone",best_followed_day_feat:"milestone",automattician_achievement:"trophy",expired_domain_alert:"alert",automattcher:"atsign"},createNoteContainer:function(e,n){var o=t("<div/>",{id:n+"-note-"+e.id,class:"wpn-note wpn-"+e.type+" "+(e.unread>0?"wpn-unread":"wpn-read")}).data({id:parseInt(e.id,10),type:e.type}),a=t("<div/>",{class:"wpn-note-body wpn-note-body-empty"}),s=t("<div/>",{style:"position: absolute; left: 180px; top: 60px;"});return a.append(s),s.spin("medium"),o.append(this.createNoteSubject(e),a),o},createNoteSubject:function(e){var n=t("<div/>",{class:"wpn-note-summary"}).append(t("<span/>",{class:"wpn-noticon noticon noticon"+e.noticon}),t("<span/>",{class:"wpn-icon no-grav",html:t("<img/>",{src:e.subject.icon,width:"24px",height:"24px",style:"display: inline-block; width: 24px; height: 24px; overflow-x: hidden; overflow-y: hidden;"})}),t("<span/>",{class:"wpn-subject",html:e.subject.html}));return n},createNoteBody:function(e){var n=t("<div/>",{class:"wpn-note-body"}),o=e.toJSON(),a="wpn-"+o.body.template;switch(o.body.template){case"single-line-list":case"multi-line-list":n.append(t("<p/>").addClass(a+"-header").html(o.body.header));for(var s in o.body.items){var i=t("<div></div>",{class:a+"-item "+a+"-item-"+s+(o.body.items[s].icon?"":" "+a+"-item-no-icon")});if(o.body.items[s].icon&&i.append(t("<img/>",{class:a+"-item-icon avatar avatar-"+o.body.items[s].icon_width,height:o.body.items[s].icon_height,width:o.body.items[s].icon_width,src:o.body.items[s].icon})),o.body.items[s].header&&i.append(t("<div></div>",{class:a+"-item-header"}).html(o.body.items[s].header)),o.body.items[s].action)switch(o.body.items[s].action.type){case"follow":var r=wpFollowButton.create(o.body.items[s].action);i.append(r),r.click(function(e){return t(this).children("a").hasClass("wpcom-follow-rest")?wpNotesCommon.bumpStat("notes-click-action","unfollow"):wpNotesCommon.bumpStat("notes-click-action","follow"),!0});break;default:console.error("Unsupported "+o.type+" action: "+o.body.items[s].action.type)}o.body.items[s].html&&i.append(t("<div></div>",{class:a+"-item-body"}).html(o.body.items[s].html)),n.append(i)}if(o.body.actions){var m=new wpNotesCommentModView({model:e});m.render(),n.append(m.el)}o.body.footer&&n.append(t("<p/>").addClass(a+"-footer").html(o.body.footer));break;case"big-badge":o.body.header&&n.append(t("<div/>").addClass(a+"-header").html(o.body.header)),o.body.badge&&n.append(t("<div></div>",{class:a+"-badge "}).append(o.body.badge)),""!==o.body.html&&n.append(t("<div/>").addClass(a+"-footer").html(o.body.html));break;default:n.text("Unsupported note body template!")}return n.find("a[notes-data-click]").mousedown(function(e){var n=t(this).attr("notes-data-click");return wpNotesCommon.bumpStat("notes-click-body",n),!0}),n},getNoteSubjects:function(t,e,n){return t.fields="id,type,unread,noticon,timestamp,subject",t.trap=!0,this.getNotes(t,e,n)},getNotes:function(t,e,n){return this.ajax({type:"GET",path:"/notifications/",data:t,success:e,error:n})},getMentions:function(t,e){return this.ajax({type:"GET",path:"/users/suggest",data:t,success:e})},markNotesSeen:function(t){return this.ajax({type:"POST",path:"/notifications/seen",data:{time:t}})},markNotesRead:function(e){var n={},o=this;for(var a in e)e[a]>0&&(n["counts["+a+"]"]=e[a]);return 0===n.length?(new t.Deferred).resolve("no unread notes"):this.ajax({type:"POST",path:"/notifications/read",data:n,success:function(t){},error:function(t){}})},ajax:function(e){var n=this,o={path:e.path,method:e.type};return"post"==e.type.toLowerCase()?o.body=e.data:o.query=e.data,t.Deferred(function(a){var s=function(){t.wpcom_proxy_request(o,function(t,n){return 200==n?("function"==typeof e.success&&e.success(t),a.resolve(t)):("function"==typeof e.error?e.error(n):console.error(n),a.reject(n))})};return n.hasUpgradedProxy?s():t.wpcom_proxy_request({metaAPI:{accessAllUsersBlogs:!0}}).done(function(){n.hasUpgradedProxy=!0,s()})})},bumpStat:function(t,e){if("undefined"!=typeof wpNotesIsJetpackClient&&wpNotesIsJetpackClient){var n=["notes-menu-impressions","notes-menu-clicks"];_.contains(n,t)&&(e=e.replace(/(,|$)/g,"-jetpack$1"))}(new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv&x_"+t+"="+e+"&baba="+Math.random()},getKeycode:function(t){if(t=t||window.event,t.target?element=t.target:t.srcElement&&(element=t.srcElement),3==element.nodeType&&(element=element.parentNode),t.ctrlKey===!0||t.altKey===!0||t.metaKey===!0)return!1;var e=t.keyCode?t.keyCode:t.which;return(!e||"INPUT"!=element.tagName&&"TEXTAREA"!=element.tagName&&"SELECT"!=element.tagName)&&((!e||"true"!=element.contentEditable)&&e)}},wpNoteModel=Backbone.Model.extend({defaults:{summary:"",unread:!0},_reloadBlocked:!1,initialize:function(){},markRead:function(){var t=this.get("unread");if(Boolean(parseInt(t,10))){var e={};e[this.id]=t,wpNotesCommon.markNotesRead(e),wpNotesCommon.bumpStat("notes-read-type",this.get("type"))}},loadBody:function(){wpNotesCommon.createNoteBody(this)},reload:function(){var e=this,n="id,type,unread,noticon,subject,body,date,timestamp,status";return"comment"==e.get("type")&&(n+=",approval_status,has_replied"),!force&&this.isReloadingBlocked()?t.Deferred().reject("reloading blocked"):wpNotesCommon.getNotes({fields:n,trap:!0,ids:[e.get("id")]},function(t){var n=t.notes;"undefined"!=typeof n[0]&&e.set(n[0])},function(){})},resize:function(){this.trigger("resize")},blockReloading:function(t){var e=this;return this._reloadBlocked=!0,clearTimeout(this.reloadBlockerTimeout),this.reloadBlockerTimeout=setTimeout(function(){return e._reloadBlocked=!1},1e3*t)},isReloadingBlocked:function(){return this._reloadBlocked}}),wpNoteList=Backbone.Collection.extend({model:wpNoteModel,lastMarkedSeenTimestamp:!1,newNotes:!1,maxNotes:!1,loading:!1,hasLoaded:!1,allBodiesLoaded:!1,comparator:function(t){return-t.get("timestamp")},addNotes:function(t){t=_.filter(t,function(t){return"object"==typeof t.subject});var e=_.map(t,function(t){return new wpNoteModel(t)});if(this.add(e),this.sort(),this.maxNotes)for(;this.length>this.maxNotes;)this.pop();this.trigger("loadNotes:change")},getMostRecentTimestamp:function(){return!!this.length&&(this.sort(),parseInt(this.at(0).get("timestamp"),10))},loadNotes:function(t){var e=this;e.loading=!0,e.trigger("loadNotes:beginLoading");var n=t.fields,o=parseInt(t.number,10),a=parseInt(t.before,10),s=parseInt(t.since,10),i=parseInt(t.timeout,10)||7e3,r="undefined"==typeof t.type?null:t.type,m="undefined"==typeof t.unread?null:t.unread;return t={timeout:i},n||(n="id,type,unread,noticon,subject,body,date,timestamp,status"),isNaN(o)&&(o=9),isNaN(a)||(t.before=a),isNaN(s)||(t.since=s),null!==m&&(t.unread=m),null!==r&&"unread"!=r&&"latest"!=r&&(t.type=r),t.number=o,t.fields=n,t.trap=!0,wpNotesCommon.getNotes(t).done(function(t){var n,o=t.notes,a=!1;(!e.lastMarkedSeenTimestamp||t.last_seen_time>e.lastMarkedSeenTimestamp)&&(a=!0,e.lastMarkedSeenTimestamp=parseInt(t.last_seen_time,10));for(var s in o){var i=e.get(o[s].id);if(i){if("object"!=typeof o[s].subject){e.remove(o[s].id),a=!0;continue}r&&(n=i.get("queried_types")||{},n[r]=!0,o[s].queried_types=n),i.set(o[s])}else{if("object"!=typeof o[s].subject)continue;r&&(n={},n[r]=!0,o[s].queried_types=n),i=new wpNoteModel(o[s]),e.add(i)}i.has("body")||(e.allBodiesLoaded=!1),a=!0}if(e.maxNotes)for(;e.length>e.maxNotes;)e.pop();a&&(e.sort(),e.trigger("loadNotes:change")),e.loading=!1,e.hasLoaded=!0,e.trigger("loadNotes:endLoading")}).fail(function(t){e.loading=!1,e.trigger("loadNotes:failed")})},loadNoteBodies:function(e){var n=this;if(n.allBodiesLoaded)return(new t.Deferred).resolve();var o=n.getNoteIds(e);if(0==o.length)return(new t.Deferred).reject();for(var a=function(t){var e=t.notes;for(var o in e)if("object"==typeof e[o].subject){var a=n.get(e[o].id);a?a.set(e[o]):(a=new wpNoteModel(e[o]),n.add(a))}},s=function(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("body loading error!")},i=[],r=3,m=0;m<r&&"undefined"!=typeof o[m];m++){var c={};c.fields="id,type,unread,noticon,timestamp,subject,body,meta,status",c.trap=!0,c["ids["+m+"]"]=o[m],i.push(wpNotesCommon.getNotes(c).done(a).fail(s))}if(o.length>r){var c={};c.fields="id,type,unread,noticon,timestamp,subject,body,meta,status",c.trap=!0;for(var m=r;m<o.length;m++)c["ids["+m+"]"]=o[m];i.push(wpNotesCommon.getNotes(c).done(a).fail(s))}var p=t.when.apply(null,i);return p.done(function(){"function"!=typeof e&&(n.allBodiesLoaded=!0)}),p},markNotesSeen:function(){var t=this,e=t.getMostRecentTimestamp();e>this.lastMarkedSeenTimestamp&&wpNotesCommon.markNotesSeen(e).done(function(){t.lastMarkedSeenTimestamp=!1})},unreadCount:function(){return this.reduce(function(t,e){return t+(e.get("unread")?1:0)},0)},numberNewNotes:function(){var t=this;return t.lastMarkedSeenTimestamp?t.getNewNotes().length:0},getNewNotes:function(){var t=this;return t.filter(function(e){return e.get("timestamp")>t.lastMarkedSeenTimestamp})},getUnreadNotes:function(){return this.filter(function(t){return Boolean(parseInt(t.get("unread"),10))})},getNotesOfType:function(t){var e=this;switch(t){case"unread":return e.getUnreadNotes();case"latest":return e.filter(function(t){var e=t.get("queried_types");return"undefined"!=typeof e&&"undefined"!=typeof e.latest&&e.latest});default:return e.filter(function(e){var n=e.get("type");if("undefined"==typeof wpNotesCommon.noteTypes[t])return!1;if("string"==typeof wpNotesCommon.noteTypes[t])return t==n;for(var o=wpNotesCommon.noteTypes[t].length,a=0;a<o;a++)if(wpNotesCommon.noteTypes[t][a]==n)return!0;return!1})}},getNoteIds:function(t){return"function"!=typeof t&&(t=function(){return!0}),_.pluck(this.filter(t),"id")}}),wpNotesCommentModView=Backbone.View.extend({mode:"buttons",actionsByName:null,possibleActions:["approve-comment","replyto-comment","like-comment","spam-comment","trash-comment","unapprove-comment","unlike-comment","unspam-comment","untrash-comment"],possibleStatuses:["approved","spam","trash","unapproved"],events:{"click .wpn-replyto-comment-button-open a":"openReply","click .wpn-comment-reply-button-close":"closeReply","click .wpn-comment-reply-button-send":"sendReply","click .wpn-like-comment-button a":"clickLikeComment","click .wpn-unlike-comment-button a":"clickLikeComment","click .wpn-approve-comment-button a":"clickModComment","click .wpn-unapprove-comment-button a":"clickModComment","click .wpn-spam-comment-button a":"clickModComment","click .wpn-unspam-comment-button a":"clickModComment","click .wpn-trash-comment-button a":"clickModComment","click .wpn-untrash-comment-button a":"clickModComment"},templateActions:'\t\t\t{{#reply}}\t\t\t<span class="{{reply.class}}">\t\t\t\t<a href="#" title="{{reply.title}}" data-action-type="{{reply.actionType}}">{{reply.text}}</a>\t\t\t</span>\t\t\t{{/reply}}\t\t\t{{#like}}\t\t\t<span class="{{like.class}}">\t\t\t\t<a href="#" title="{{like.title}}" data-action-type="{{like.actionType}}">{{like.text}}</a>\t\t\t</span>\t\t\t{{/like}}\t\t\t<span class="wpn-more">\t\t\t\t<a href="#">More</a>\t\t\t\t<div class="wpn-more-container">\t\t\t\t{{#spam}}\t\t\t\t<span class="{{spam.class}}">\t\t\t\t\t<a href="#" title="{{spam.title}}" data-action-type="{{spam.actionType}}">{{spam.text}}</a>\t\t\t\t</span>\t\t\t\t{{/spam}}\t\t\t\t{{#trash}}\t\t\t\t<span class="{{trash.class}}">\t\t\t\t\t<a href="#" title="{{trash.title}}" data-action-type="{{trash.actionType}}">{{trash.text}}</a>\t\t\t\t</span>\t\t\t\t{{/trash}}\t\t\t\t</div>\t\t\t</span>\t\t\t{{#approve}}\t\t\t<span class="{{approve.class}}">\t\t\t\t<a href="#" title="{{approve.title}}" data-action-type="{{approve.actionType}}">{{approve.text}}</a>\t\t\t</span>\t\t\t{{/approve}}\t\t\t<span class="wpn-comment-mod-waiting"></span>',templateReply:'\t\t\t<div class="wpn-note-comment-reply">\t\t\t\t<h5>{{reply_header_text}}</h5>\t\t\t\t<textarea class="wpn-note-comment-reply-text" rows="5" cols="45" name="wpn-note-comment-reply-text"></textarea>\t\t\t\t<p class="wpn-comment-submit">\t\t\t\t\t<span class="wpn-comment-submit-waiting" style="display: none;"></span>\t\t\t\t<span class="wpn-comment-submit-error" style="display:none;">Error!</span>\t\t\t\t<a href="#" class="wpn-comment-reply-button-send alignright">{{submit_button_text}}</a>\t\t\t\t<a href="#" class="wpn-comment-reply-button-close alignleft">_</a>\t\t\t\t</p>\t\t\t</div>',initialize:function(){var e=this;return this.setElement(t('<div class="wpn-note-comment-actions" />')),this.listenTo(this.model,"change:status",function(t,n){var o,a;if(o=n.approval_status,a=t.previous("status")||{},!a.approval_status||a.approval_status!==o)return o.match(/^trash|spam$/)?e.setUndoStatus(a.approval_status):void 0}),this.listenTo(this.model,"change",this.render),t(document).on("click",".wpn-more > a",function(e){var n;if(e.preventDefault(),e.stopPropagation(),!e.doneMoreToggle)return e.doneMoreToggle=!0,n=t(e.currentTarget),n.parent().find(".wpn-more-container").toggle(),!1}),t(document).on("click",".wpn-note-body",function(e){var n,o;n=t(e.target),n.parents(".wpn-more").length||(o=n.closest(".wpn-note-body"),o.find(".wpn-more-container").is(":visible")&&o.find(".wpn-more-container").toggle())}),t(".wpn-more-container:not(:has(*))").parents(".wpn-more").hide(),t(document).on("keydown",function(t){var n,o,a;if(!e.$el.is(":hidden")&&"buttons"===e.mode&&(n=wpNotesCommon.getKeycode(t)))return a=e.getValidActions(),o=e.model.get("status")||{},82===n&&_.contains(a,"replyto-comment")&&e.openReply(t),65===n&&(_.contains(a,"approve-comment")?e.modComment("approve-comment"):_.contains(a,"unapprove-comment")&&e.modComment("unapprove-comment")),76===n&&(_.contains(a,"like-comment")?e.likeComment("like-comment"):_.contains(a,"unlike-comment")&&e.likeComment("unlike-comment")),83===n&&(_.contains(a,"spam-comment")?e.modComment("spam-comment"):_.contains(a,"unspam-comment")&&e.modComment("unspam-comment")),84===n&&(_.contains(a,"trash-comment")?e.modComment("trash-comment"):_.contains(a,"untrash-comment")&&e.modComment("untrash-comment")),!1}),this},render:function(){var t;return this.model._changing&&"reply"===this.mode?this:(this.$el.empty(),t=this.model.get("body"),t.actions?(this.updateActionsMap(),"buttons"===this.mode?this.$el.html(this.createActionsHTML()):(this.$el.html(this.createReplyBoxHTML()),this.$("textarea").focus()),this.delegateEvents(),this):this)},setUndoStatus:function(t){return this._undoStatus=t},getUndoStatus:function(){var t;return this._undoStatus?this._undoStatus:(t=this.model.get("status"),null!=t&&"1"===t.undo_status?"approved":"unapproved")},getValidActions:function(){var t,e;switch(e=this.model.get("status")||{},e.approval_status){case"pending":case"unapproved":return["replyto-comment","approve-comment","spam-comment","trash-comment"];case"approved":return t=["replyto-comment","unapprove-comment","spam-comment","trash-comment"],e.i_liked?t.splice(1,0,"unlike-comment"):t.splice(1,0,"like-comment"),t;case"trash":return["untrash-comment"];case"spam":return["unspam-comment"];default:return[]}},getResultantStatus:function(t){switch(t){case"approve-comment":return"approved";case"unapprove-comment":return"unapproved";case"spam-comment":return"spam";case"trash-comment":return"trash";case"unspam-comment":case"untrash-comment":return this.getUndoStatus();default:return}},getStatusParamFromActionType:function(t){if(t)switch(t){case"approve-comment":return"approved";case"unapprove-comment":return"unapproved";default:return t.split("-")[0]}},getComplementaryActionType:function(t){switch(t){case"approve-comment":return"unapprove-comment";case"unapprove-comment":return"approve-comment";case"like-comment":return"unlike-comment";case"unlike-comment":return"like-comment";case"spam-comment":return"unspam-comment";case"trash-comment":return"untrash-comment";case"unspam-comment":return"spam-comment";case"untrash-comment":return"trash-comment";default:return}},getTranslation:function(t){return"undefined"!=typeof notes_i18n&&notes_i18n.translate?notes_i18n.translate(t).fetch():t},getTranslationsForActionType:function(t){var e;return e=this.getTranslation,this._translationsByActionType||(this._translationsByActionType={"approve-comment":{buttonText:e("Approve"),titleText:e("Approve this comment.")},"like-comment":{buttonText:e("Like"),titleText:e("Like this comment.")},"replyto-comment":{buttonText:e("Reply"),titleText:e("Reply to this comment.")},"spam-comment":{buttonText:e("Spam"),titleText:e("Mark this comment as spam.")},"trash-comment":{buttonText:e("Trash"),titleText:e("Move this comment to the trash.")},"unapprove-comment":{buttonText:e("Unapprove"),titleText:e("Unapprove this comment.")},"unlike-comment":{buttonText:e("Liked"),titleText:e("Unlike this comment.")},"unspam-comment":{buttonText:e("Unspam"),titleText:e("Unmark this comment as spam.")},"untrash-comment":{buttonText:e("Untrash"),titleText:e("Restore this comment from the trash.")}}),this._translationsByActionType[t]},updateActionsMap:function(){var e,n,o,a,s,i,r,m,c,p,l,d=this;for(a=this.model.get("body"),o=a.actions||[],this.actionsByName=this.actionsByName||{},s=function(e){if(e.type&&e.params)return d.actionsByName[e.type]=t.extend({},e.params,{actionType:e.type})},i=0,m=o.length;i<m;i++)e=o[i],s(e);for(p=this.possibleActions,l=[],r=0,c=p.length;r<c;r++)n=p[r],l.push(function(e){var n,o,a,s,i,r;if(n=d.actionsByName[e],s=d.getStatusParamFromActionType(e),r=d.getTranslationsForActionType(e),n||(o=d.actionsByName[d.getComplementaryActionType(e)],o&&(d.actionsByName[e]=t.extend({},o,{actionType:e,ajax_arg:s,rest_body:{status:s},text:r.buttonText,title_text:r.titleText}))),"replyto-comment"===e)return a=d.model.get("status"),i="approved"===a.approval_status?d.getTranslation("Reply"):d.getTranslation("Approve and Reply"),t.extend(d.actionsByName["replyto-comment"],{button_text:r.buttonText,submit_button_text:i,text:r.buttonText,title_text:r.titleText})}(n));return l},createActionsHTML:function(){var e,n,o,a,s,i,r,m=this;for(n=this.model.get("status").approval_status,o={},r=this.getValidActions(),a=function(e){var a,s;if(a=m.actionsByName[e])switch(s={class:"wpn-"+e+"-button",actionType:e,text:a.text||a.button_text},e){case"replyto-comment":return o.reply=t.extend({},s,{class:"wpn-replyto-comment-button-open",title:(a.title_text||a.button_title_text)+" [r]"});case"like-comment":case"unlike-comment":return o.like=t.extend({},s,{title:(a.title_text||a.button_title_text)+" [l]"});case"approve-comment":case"unapprove-comment":if(_.contains(["spam","trash"],n))break;return o.approve=t.extend({},s,{title:(a.title_text||a.button_title_text)+" [a]"});case"spam-comment":case"unspam-comment":if("trash"===n)break;return o.spam=t.extend({},s,{title:(a.title_text||a.button_title_text)+" [s]"});case"trash-comment":case"untrash-comment":if("spam"===n)break;return o.trash=t.extend({},s,{title:(a.title_text||a.button_title_text)+" [t]"})}},s=0,i=r.length;s<i;s++)e=r[s],a(e);return Mustache.render(this.templateActions,o)},createReplyBoxHTML:function(){var t,e,n;if(t=this.actionsByName["replyto-comment"])return e=t.site_id||0,n=this.model.id||0,Mustache.render(this.templateReply,{reply_header_text:t.reply_header_text,submit_button_text:t.submit_button_text})},closeReply:function(t){return t&&t.preventDefault(),this.mode="buttons",this.model.currentReplyText=this.$el.children(".wpn-note-comment-reply").children(".wpn-note-comment-reply-text").val(),this.render(),this.model.resize()},openReply:function(e){var n,o,a,s=this;if(e&&e.preventDefault(),this.mode="reply",this.render(),this.$el.children(".wpn-note-comment-reply").children(".wpn-note-comment-reply-text").val(this.model.currentReplyText),t(".selected .wpn-note-body p.submitconfirm").remove(),this.model.resize(),window.mentionDataCache||(window.mentionDataCache=[]),n=this.actionsByName["replyto-comment"],null!=n.site_id)return null!=window.mentionDataCache[n.site_id]?this.$el.children(".wpn-note-comment-reply").children(".wpn-note-comment-reply-text").mentions(window.mentionDataCache[n.site_id]):(window.mentionDataCache[n.site_id]=[],a={site_id:n.site_id,client:"notes-widget"},o=wpNotesCommon.getMentions(a),o.done(function(t){return window.mentionDataCache[n.site_id]=t.suggestions,s.$el.children(".wpn-note-comment-reply").children(".wpn-note-comment-reply-text").mentions(window.mentionDataCache[n.site_id])}))},sendReply:function(e){var n,o,a,s,i,r,m,c=this;return e&&e.preventDefault(),(o=this.actionsByName["replyto-comment"])?(i=this.$el.children(".wpn-note-comment-reply"),this.model.currentReplyText=i.children(".wpn-note-comment-reply-text").val(),a=o.site_id||0,s=o.comment_id||0,r=this.model.currentReplyText||0,a&&s&&r?(n=i.children(".wpn-comment-submit"),n.children(".wpn-comment-submit-error").hide(),n.children(".wpn-comment-reply-button-send").hide(),n.children(".wpn-comment-submit-waiting").gifspin("small").show(),wpNotesCommon.bumpStat("notes-click-action","replyto-comment"),m=function(){return wpNotesCommon.ajax({type:"POST",path:"/sites/"+a+"/comments/"+s+"/replies/new",data:{content:r},success:function(t){return"string"==typeof t?(c.errorReply(t),!1):(c.closeReply(),c.model.currentReplyText="",c.model.reload(!0).done(function(){var t;if(!c.model.get("status").i_replied)return t=0,c.replyCommentInterval=setInterval(function(){return c.model.reload(!0).done(function(){if(c.model.get("status").i_replied||t++>=10)return clearInterval(c.replyCommentInterval)})},3e3)}))},error:function(t){return c.errorReply(t)}}).done(function(){var e,n;return e=t(".selected .wpn-comment-date a").attr("href"),n='<p class="submitconfirm"><strong>',n+=notes_i18n.translate("Reply successful, <a %s>view thread</a>").fetch('target="_blank" href="'+e+'"'),n+="</strong></p>",t(".selected .wpn-note-body").append(n)})},"approved"!==this.model.get("status").approval_status?this.modComment("approve-comment").done(m):m()):t.Deferred().reject("Invalid sendReply params")):t.Deferred().reject("Invalid replyto-comment action")},errorReply:function(e){var n,o,a;if(o=e,"object"==typeof e&&(e.responseText?(a=t.parseJSON(e.responseText),o=a.error+": "+a.message):o=e.statusText?e.statusText:"Unknown Error"),n=this.$el.children(".wpn-note-comment-reply"),n.children(".wpn-comment-submit").children(".wpn-comment-submit-waiting").hide(),o)return n.children(".wpn-comment-submit").children(".wpn-comment-submit-error").text(o).show()},clickModComment:function(e){return e?(e.preventDefault(),this.modComment(t(e.currentTarget).data("action-type"))):t.Deferred.reject("invalid click event")},modComment:function(e){var n,o=this;return this.$(".wpn-comment-mod-waiting").show().gifspin("small"),n=t.Deferred().always(function(){return o.$(".wpn-comment-mod-waiting").empty().hide()}).fail(function(t,e){if("undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&(console.error("Comment moderation error"),t&&console.error(t)),!e||"too_soon"!==e)return o.model.reload()}),this.modPromise&&"function"==typeof this.modPromise.state&&"pending"===this.modPromise.state()?(n.always(function(){return o.$(".wpn-comment-mod-waiting").show().gifspin("small")}),n.reject("Moderation already in progress","too_soon")):(this.modPromise=n.promise(),e&&e.length&&_.contains(this.getValidActions(),e)?(t.Deferred(function(){var a,s;return wpNotesCommon.bumpStat("notes-click-action",e),(a=o.actionsByName[e])?(s=o.getResultantStatus(e),s&&(o.model.set("status",t.extend({},o.model.get("status"),{approval_status:s})),o.$(".wpn-comment-mod-waiting").show().gifspin("small")),wpNotesCommon.ajax({type:"POST",path:a.rest_path,data:a.rest_body}).done(function(e){var a;return a=(null!=e?e.status:void 0)?e.status:"undefined",_.contains(o.possibleStatuses,a)?(o.model.set("status",t.extend({},o.model.get("status"),{approval_status:a})),o.model.blockReloading(15),n.resolve()):n.reject('Invalid status: "'+a+'" received from moderation POST')}).fail(function(t){return n.reject(t)})):n.reject("Undefined action params for type: "+e)}),this.modPromise):n.reject("Invalid actionType"))},clickLikeComment:function(e){var n,o;return e.preventDefault(),n=t(e.currentTarget),o=n.data("action-type"),this.likeComment(o)},likeComment:function(e){var n,o,a,s=this;return n=this.actionsByName[e],"like-comment"===e?(o=!0,a=n.rest_path+"new/"):(o=!1,a=n.rest_path+"mine/delete/"),this.model.set("status",t.extend({},this.model.get("status"),{i_liked:o})),this.$(".wpn-comment-mod-waiting").show().gifspin("small"),wpNotesCommon.ajax({type:"POST",path:a}).done(function(t){return s.$(".wpn-comment-mod-waiting").empty().hide()})}})}(jQuery),function(){!function(t,e){return e.fn.gifspin=function(t){var n,o,a;if(n=e(this),_.isFinite(t)&&t>0)a=Math.min(~~t,128);else switch(t){case"tiny":a=8;break;case"small":a=16;break;case"medium":a=32;break;case"large":a=64;break;default:a=128}return o=e('<img class="gifspinner" src="//s0.wp.com/wp-content/mu-plugins/notes/images/loading.gif" />'),o.css({height:a,width:a}),n.html(o),n}}("undefined"!=typeof exports&&null!==exports?exports:this,window.jQuery)}.call(this);
"undefined"==typeof wpcom&&(wpcom={}),"undefined"==typeof wpcom.events&&(wpcom.events=_.extend({},Backbone.Events)),function(e){var t=window.wpNotesArgs||{},n=t.cacheBuster||function(){var e=new Date;return e.getFullYear()+("0"+(1+e.getMonth())).slice(-2)+("0"+e.getDate()).slice(-2)}(),s=t.iframeUrl||"https://widgets.wp.com/notes/",a=t.iframeAppend||"",o=t.iframeScroll||"no",i=t.wide||!1,r,c,l=Backbone.View.extend({el:"#wp-admin-bar-notes",hasUnseen:null,initialLoad:!0,count:null,iframe:null,iframeWindow:null,messageQ:[],iframeSpinnerShown:!1,isJetpack:!1,linkAccountsURL:!1,currentMasterbarActive:!1,initialize:function(){var t=this,n=navigator.appVersion.match(/MSIE (\d+)/);if(n&&parseInt(n[1],10)<8){var s=t.$("#"+r),o=t.$(".ab-empty-item");if(!s.length||!o.length)return;var i=t.$el.offset();return t.$(".ab-item").removeClass("ab-item"),t.$("#wpnt-notes-unread-count").html("?"),s.html(' \t\t\t\t\t<div class="wpnt-notes-panel-header"><p>Notifications are not supported in this browser!</p> </div> \t\t\t\t\t<img src="http://i2.wp.com/wordpress.com/wp-content/mu-plugins/notes/images/jetpack-notes-2x.png" /> \t\t\t\t\t<p class="wpnt-ie-note"> \t\t\t\t\tPlease <a href="http://browsehappy.com" target="_blank">upgrade your browser</a> to keep using notifications. \t\t\t\t\t</p>').addClass("browse-happy"),t.$el.on("mouseenter",function(e){clearTimeout(t.fadeOutTimeout),s.is(":visible:animated")&&s.stop().css("opacity",""),o.css({"background-color":"#eee"}),s.show()}),void t.$el.on("mouseleave",function(){t.fadeOutTimeout=setTimeout(function(){clearTimeout(t.fadeOutTimeout),s.is(":animated")||s.fadeOut(250,function(){o.css({"background-color":"transparent"})})},350)})}"function"!=typeof e.fn.spin&&(e.fn.spin=function(e){}),this.isRtl=e("#wpadminbar").hasClass("rtl"),this.count=e("#wpnt-notes-unread-count"),this.panel=e("#"+r),this.hasUnseen=this.count.hasClass("wpn-unread"),"undefined"!=typeof wpNotesIsJetpackClient&&wpNotesIsJetpackClient&&(t.isJetpack=!0),t.isJetpack&&"undefined"!=typeof wpNotesLinkAccountsURL&&(t.linkAccountsURL=wpNotesLinkAccountsURL),this.$el.children(".ab-item").on("click touchstart",function(e){return e.preventDefault(),t.togglePanel(),!1}),this.preventDefault=function(e){return e&&e.preventDefault(),!1},"2"==a&&(this.panel.mouseenter(function(){document.body.addEventListener("mousewheel",t.preventDefault)}),this.panel.mouseleave(function(){document.body.removeEventListener("mousewheel",t.preventDefault)}),"undefined"!=typeof document.hidden&&document.addEventListener("visibilitychange",function(){t.postMessage({action:"toggleVisibility",hidden:document.hidden})})),e(document).bind("mousedown focus",function(n){var s;return!t.showingPanel||(s=e(n.target),!!s.is(document)||(!!s.closest("#wp-admin-bar-notes").length||(t.hidePanel(),!1)))}),e(document).on("keydown.notes",function(e){var n=wpNotesCommon.getKeycode(e);if(n&&(27==n&&t.hidePanel(),78==n&&t.togglePanel(),null!==this.iframeWindow))return!t.showingPanel||74!=n&&40!=n?!t.showingPanel||75!=n&&38!=n?!t.showingPanel||82!=n&&65!=n&&83!=n&&84!=n?void 0:(t.postMessage({action:"keyEvent",keyCode:n}),!1):(t.postMessage({action:"selectPrevNote"}),!1):(t.postMessage({action:"selectNextNote"}),!1)}),wpcom.events.on("notes:togglePanel",function(){t.togglePanel()}),t.isJetpack?t.loadIframe():setTimeout(function(){t.loadIframe()},3e3),t.count.hasClass("wpn-unread")?wpNotesCommon.bumpStat("notes-menu-impressions","non-zero"):wpNotesCommon.bumpStat("notes-menu-impressions","zero"),e(window).on("message",function(e){if(!e.data&&e.originalEvent.data&&(e=e.originalEvent),"https://widgets.wp.com"==e.origin)try{var n="string"==typeof e.data?JSON.parse(e.data):e.data;if("notesIframeMessage"!=n.type)return;t.handleEvent(n)}catch(e){}})},handleEvent:function(t){var n="undefined"!=typeof wpcomNewdash&&"undefined"!=typeof wpcomNewdash.router&&"undefined"!==wpcomNewdash.router.setRoute;if(t&&t.action)switch(t.action){case"togglePanel":this.togglePanel();break;case"render":this.render(t.num_new,t.latest_type);break;case"renderAllSeen":this.renderAllSeen();break;case"iFrameReady":this.iFrameReady(t);break;case"goToNotesPage":n?wpcomNewdash.router.setRoute("/notifications"):window.location.href="//wordpress.com/me/notifications/";break;case"widescreen":var s=e("#"+c);t.widescreen&&!s.hasClass("widescreen")?s.addClass("widescreen"):!t.widescreen&&s.hasClass("widescreen")&&s.removeClass("widescreen")}},render:function(t,n){var s=this,a=!1;if(!1!==this.hasUnseen||0!==t){if(this.initialLoad&&this.hasUnseen&&0!==t)return void(this.initialLoad=!1);this.hasUnseen||0===t||wpNotesCommon.bumpStat("notes-menu-impressions","non-zero-async");var o=wpNotesCommon.noteType2Noticon[n];"undefined"==typeof o&&(o="notification");var i=e("<span/>",{class:"noticon noticon-"+o}),r=this.getStatusIcon(t);0===t||this.showingPanel?(this.hasUnseen=!1,s.count.fadeOut(200,function(){s.count.empty(),s.count.removeClass("wpn-unread").addClass("wpn-read"),s.count.html(r),s.count.fadeIn(500)}),wpcom&&wpcom.masterbar&&wpcom.masterbar.hasUnreadNotifications(!1)):(this.hasUnseen&&s.count.fadeOut(400,function(){s.count.empty(),s.count.removeClass("wpn-unread").addClass("wpn-read"),s.count.html(i),s.count.fadeIn(400)}),this.hasUnseen=!0,s.count.fadeOut(400,function(){s.count.empty(),s.count.removeClass("wpn-read").addClass("wpn-unread"),s.count.html(i),s.count.fadeIn(400,function(){})}),wpcom&&wpcom.masterbar&&wpcom.masterbar.hasUnreadNotifications(!0))}},renderAllSeen:function(){var e=this.getStatusIcon(0);this.count.removeClass("wpn-unread").addClass("wpn-read"),this.count.empty(),this.count.html(e),this.hasUnseen=!1,wpcom&&wpcom.masterbar&&wpcom.masterbar.hasUnreadNotifications(!1)},getStatusIcon:function(t){var n="";switch(t){case 0:n="noticon noticon-notification";break;case 1:n="noticon noticon-notification";break;case 2:n="noticon noticon-notification";break;default:n="noticon noticon-notification"}return e("<span/>",{class:n})},togglePanel:function(){var t=this;if(this.loadIframe(),this.$el.toggleClass("wpnt-stayopen"),this.$el.toggleClass("wpnt-show"),this.showingPanel=this.$el.hasClass("wpnt-show"),e(".ab-active").removeClass("ab-active"),this.showingPanel){var n=this.$(".wpn-unread");n.length&&n.removeClass("wpn-unread").addClass("wpn-read"),this.reportIframeDelay(),this.hasUnseen?wpNotesCommon.bumpStat("notes-menu-clicks","non-zero"):wpNotesCommon.bumpStat("notes-menu-clicks","zero"),this.hasUnseen=!1}this.postMessage({action:"togglePanel",showing:this.showingPanel});var s=function(e){null===e.contentWindow?e.addEventListener("load",function(){e.contentWindow.focus()}):e.contentWindow.focus()};this.showingPanel?s(this.iframe[0]):window.focus(),this.setActive(this.showingPanel)},setActive:function(t){t?(this.currentMasterbarActive=e(".masterbar li.active"),this.currentMasterbarActive.removeClass("active"),this.$el.addClass("active")):(this.$el.removeClass("active"),this.currentMasterbarActive.addClass("active"),this.currentMasterbarActive=!1),this.$el.find("a").first().blur()},loadIframe:function(){var t=this,l=[],d,u,m,p;null===t.iframe&&(t.panel.addClass("loadingIframe"),t.isJetpack&&(l.push("jetpack=true"),t.linkAccountsURL&&l.push("link_accounts_url="+escape(t.linkAccountsURL))),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&t.panel.addClass("touch"),p="rtl"==e("#"+r).attr("dir"),u=e("#"+r).attr("lang")||"en",l.push("v="+n),l.push("locale="+u),m=l.length?"?"+l.join("&"):"",d=s,"2"!=a||!t.isRtl&&!p||/rtl.html$/.test(s)||(d=s+"rtl.html"),d=d+m+"#"+document.location.toString(),"rtl"==e("#"+r).attr("dir")&&(d+="&rtl=1"),u.match(/^en/)||(d+="&lang="+u),t.iframe=e('<iframe style="display:none" id="'+c+'" frameborder=0 ALLOWTRANSPARENCY="true" scrolling="'+o+'"></iframe>'),t.iframe.attr("src",d),i&&(t.panel.addClass("wide"),t.iframe.addClass("wide")),t.panel.append(t.iframe))},reportIframeDelay:function(){if(!this.iframeWindow)return void(this.iframeSpinnerShown||(this.iframeSpinnerShown=(new Date).getTime()));if(null!==this.iframeSpinnerShown){var e=0;this.iframeSpinnerShown&&(e=(new Date).getTime()-this.iframeSpinnerShown),0===e?wpNotesCommon.bumpStat("notes_iframe_perceived_delay","0"):e<1e3?wpNotesCommon.bumpStat("notes_iframe_perceived_delay","0-1"):e<2e3?wpNotesCommon.bumpStat("notes_iframe_perceived_delay","1-2"):e<4e3?wpNotesCommon.bumpStat("notes_iframe_perceived_delay","2-4"):e<8e3?wpNotesCommon.bumpStat("notes_iframe_perceived_delay","4-8"):wpNotesCommon.bumpStat("notes_iframe_perceived_delay","8-N"),this.iframeSpinnerShown=null}},iFrameReady:function(t){var n=this,s=document.createElement("a");s.href=this.iframe.get(0).src,this.iframeOrigin=s.protocol+"//"+s.host,this.iframeWindow=this.iframe.get(0).contentWindow,"num_new"in t&&this.render(t.num_new,t.latest_type),this.panel.removeClass("loadingIframe").find(".wpnt-notes-panel-header").remove(),this.iframe.show(),this.showingPanel&&this.reportIframeDelay(),e(window).on("focus keydown mousemove scroll",function(){var e=(new Date).getTime();(!n.lastActivityRefresh||n.lastActivityRefresh<e-5e3)&&(n.lastActivityRefresh=e,n.postMessage({action:"refreshNotes"}))}),this.sendQueuedMessages()},hidePanel:function(){this.showingPanel&&this.togglePanel()},postMessage:function(e){var t=this;try{var n="string"==typeof e?JSON.parse(e):e;if(!_.isObject(n))return;n=_.extend({type:"notesIframeMessage"},n);var s=this.iframeOrigin;this.iframeWindow&&this.iframeWindow.postMessage?this.iframeWindow.postMessage(JSON.stringify(n),s):this.messageQ.push(n)}catch(e){}},sendQueuedMessages:function(){var e=this;_.forEach(this.messageQ,function(t){e.postMessage(t)}),this.messageQ=[]}});e(function(){0==e("#wpnt-notes-panel").length&&e("#wpnt-notes-panel2").length&&"undefined"!=typeof wpNotesIsJetpackClientV2&&wpNotesIsJetpackClientV2&&(s="https://widgets.wp.com/notifications/",a="2",o="yes",i=!0),r="wpnt-notes-panel"+a,c="wpnt-notes-iframe"+a,new l})}(jQuery);
jQuery(document).ready(function(i){var a={init:function(){i(".incsub-mailchimp-form").submit(a.on_submit_form)},on_submit_form:function(a){a.preventDefault();for(var n=i(this).attr("id"),e=i("#"+n).serializeArray(),t=i("#"+n+" .incsub-mailchimp-error"),r=i("#"+n+" .incsub-mailchimp-updated"),s=i("#"+n).find(".mailchimp-spinner"),d={},o=0;o<e.length-1;o++)d[e[o].name]=e[o].value;return t.slideUp().find("*").detach(),s.css("visibility","visible"),i.ajax({url:mailchimp_form_captions.ajaxurl,type:"post",data:d,dataType:"json"}).done(function(a){if(s.css("visibility","hidden"),a.success)r.slideDown(),i("#"+n).find("*").not(".incsub-mailchimp-updated").detach();else{for(var e=0;e<a.data.errors.length;e++){var d=i("<li></li>").text(a.data.errors[e]);t.append(d)}t.slideDown()}}),!1}};a.init()});